<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Flipbook Free – Buat Buku Digital Interaktif Tanpa Watermark</title>

    <!-- Deskripsi SEO -->
    <meta name="description" content="Buat flipbook online gratis dari gambar atau PDF tanpa watermark. Mudah, cepat, dan tanpa batasan." />
    <meta name="keywords" content="flipbook gratis, tanpa watermark, buat buku digital, PDF ke flipbook, JPG ke flipbook, e-modul online, digital booklet" />
    <meta name="author" content="Flipbook Free Team" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph (untuk media sosial) -->
    <meta property="og:title" content="Flipbook Gratis Tanpa Watermark – Convert JPG atau PDF ke Flipbook" />
    <meta property="og:description" content="Ubah gambar atau PDF menjadi flipbook interaktif tanpa watermark. Cocok untuk e-modul, katalog, portofolio, dan lainnya." />
    <meta property="og:image" content="https://flipbookmu.com/assets/og-image.jpg" />
    <!-- Ganti dengan gambar asli -->
    <meta property="og:url" content="https://flipbookmu.com/" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Flipbook Free – Tanpa Watermark & 100% Gratis" />
    <meta name="twitter:description" content="Platform online untuk membuat flipbook dari PDF atau JPG tanpa watermark." />
    <meta name="twitter:image" content="https://flipbookmu.com/assets/og-image.jpg" />

    <!-- Favicon -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />

    <!-- jQuery & Turn.js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/turn.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <style>
      html,
      body {
        overflow: hidden; /* Hilangkan scroll seluruh halaman */
      }

      body {
        /* background: #f0f0f0; */
        background-image: url(assets/bg.jpg);
        display: flex;
        flex-direction: column; /* child tersusun vertikal */
        justify-content: space-between;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
      }

      /* NAV ATAS */
      #top-nav {
        width: 100%;
        background-color: black;
        display: flex;
        align-items: center;
        padding: 10px 20px;
        box-sizing: border-box;
      }

      #top-nav img {
        height: 40px;
        width: auto;
      }

      #magazine-container {
        position: relative;
        width: 90vw;
        max-width: 700px;
        height: 80vh;
        overflow: hidden; /* Prevent Turn.js effect keluar */
      }

      #magazine {
        width: 100%;
        height: 100%;
        position: relative;
      }

      #magazine .turn-page {
        /* background-color: #f0f0f0; */
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
      }

      /* NAV BAWAH */
      #nav-controls {
        padding: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 5px;
        background-color: black;
        width: 100%;
      }

      #nav-controls button {
        background: #333;
        color: #fff;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }

      #nav-controls button:hover {
        background: #555;
      }

      #page-indicator {
        background: #ccc;
        color: #333;
        padding: 5px 12px;
        border-radius: 5px;
        font-size: 16px;
      }

      .custom-link-box {
        position: absolute;
        font-size: 10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #053f6e;
        width: 235px;
        height: 15px;
        padding: 12px 0;
        text-align: center;
        font-weight: bold;
        text-decoration: none;
        color: white;
        box-shadow: 2px 2px 5px rgba(4, 41, 122, 0.2);
        z-index: 20;
      }

      /* Default untuk layar besar (laptop/desktop) */
      .custom-link-box {
        top: 76%;
        /* 77px */
      }
      /* Tambahkan ke tombol zoom */
      #zoom-controls {
        margin-left: auto;
        display: flex;
        gap: 10px;
      }

      .zoom-btn,
      .fullscreen-btn {
        background-color: #333;
        color: #fff;
        border: none;
        padding: 6px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }

      .zoom-btn:hover,
      .fullscreen-btn:hover {
        background-color: #555;
      }

      /* Jika mobile (max width 767px) */
      @media (max-width: 767px) {
        .custom-link-box {
          top: 71%;
        }
      }
    </style>
  </head>

  <body>
    <!-- NAV ATAS -->
    <!-- NAV ATAS -->
    <div id="top-nav">
      <img src="assets/logo-flip.png" alt="Logo Flipbook" />
      <div id="zoom-controls">
        <button class="zoom-btn" onclick="zoomIn()">➕</button>
        <button class="zoom-btn" onclick="zoomOut()">➖</button>
        <button class="fullscreen-btn" onclick="toggleFullScreen()">[]</button>
      </div>
    </div>

    <!-- FLIPBOOK -->
    <div id="magazine-container">
      <div id="magazine"></div>
    </div>

    <!-- NAV BAWAH -->
    <div id="nav-controls">
      <button id="first-page">⏮</button>
      <button id="prev-page">⬅</button>
      <span id="page-indicator">1/22</span>
      <button id="next-page">➡</button>
      <button id="last-page">⏭</button>
    </div>

    <!-- Suara Flip -->
    <audio id="flip-sound" src="assets/flip.mp3" preload="auto"></audio>

    <script>
      $(document).ready(function () {
        const magazine = $("#magazine");
        const flipSound = document.getElementById("flip-sound");

        // Hitung jumlah JPG di folder pages_new/ via JS (asumsi 0001.jpg, 0002.jpg, dst)
        let totalPages = 0;
        const tryLoadPage = (i) => {
          const img = new Image();
          const filename = String(i).padStart(4, "0") + ".jpg";
          img.src = `pages_new/${filename}`;
          img.onload = () => {
            const page = document.createElement("div");
            page.className = "turn-page page-item";
            page.style.backgroundImage = `url(pages_new/${filename})`;
            magazine.append(page);
            tryLoadPage(i + 1);
          };
          img.onerror = () => {
            // Selesai
            totalPages = i - 1;
            setupFlipbook();
          };
        };

        const setupFlipbook = () => {
          const isMobile = window.innerWidth < 768;

          magazine.turn({
            display: isMobile ? "single" : "double",
            acceleration: true,
            elevation: 50,
            gradients: true,
            autoCenter: true,
            when: {
              turned: function (e, page) {
                $("#page-indicator").text(`${page}/${totalPages}`);
                flipSound.play();
              },
            },
          });

          $("#page-indicator").text(`1/${totalPages}`);

          $("#first-page").on("click", function () {
            magazine.turn("page", 1);
          });
          $("#last-page").on("click", function () {
            magazine.turn("page", totalPages);
          });
          $("#prev-page").on("click", function () {
            magazine.turn("previous");
          });
          $("#next-page").on("click", function () {
            magazine.turn("next");
          });

          $(window).on("keydown", function (e) {
            if (e.keyCode === 37) magazine.turn("previous");
            if (e.keyCode === 39) magazine.turn("next");
          });
        };

        tryLoadPage(1); // Mulai dari 0001.jpg
      });
      let currentZoom = 1;

      function zoomIn() {
        if (currentZoom < 2) {
          currentZoom += 0.1;
          applyZoom();
        }
      }

      function zoomOut() {
        if (currentZoom > 0.5) {
          currentZoom -= 0.1;
          applyZoom();
        }
      }

      function applyZoom() {
        const magazine = document.getElementById("magazine");
        magazine.style.transform = `scale(${currentZoom})`;
        magazine.style.transformOrigin = "center center";
      }

      function toggleFullScreen() {
        const elem = document.documentElement;

        if (!document.fullscreenElement) {
          elem.requestFullscreen().catch((err) => {
            alert(`Gagal masuk fullscreen: ${err.message}`);
          });
        } else {
          document.exitFullscreen();
        }
      }
    </script>
  </body>
</html>
